<link rel="stylesheet" type="text/css" href="static/style.css" />


{% extends "base.html" %}

{% block content %}
<h1>Dashboard</h1>
<p>Welcome to the CyberLotus Project dashboard.</p>
{% endblock %}
<!-- Emergency Stop Button -->
<form id="emergencyStopForm" action="{{ url_for('emergency_stop_route') }}" method="post">
    <button type="submit" class="btn btn-danger btn-lg" onclick="confirmEmergencyStop()">ðŸš¨ EMERGENCY STOP</button>
</form>




<script>

getSystemStats();


function confirmEmergencyStop() {
    if (confirm("âš ï¸ Are you sure you want to activate the EMERGENCY STOP? This will immediately stop all pumps!")) {
        fetch('/emergency_stop', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
            })
            .catch(error => {
                alert("âŒ Failed to send Emergency Stop command.");
                console.error('Error:', error);
            });
    } else {
        event.preventDefault();  // Cancel if user cancels the confirmation
    }
}


function getSystemStats() {
  fetch("/sys_state")
   .then(response => response.json())
   .then(data => {
      console.log(data);
      updateReadings(); // Make another request to update the readings





</script>




<button onclick="getSystemStats()">getSystemStats</button>